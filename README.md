## 구룡투 (Guryongtu) : Python Pygame Project
### 1. 프로젝트 개요
본 프로젝트는 전략 보드게임 **'구룡투(Nine Dragon Fight)'**를 Python의 pygame 라이브러리를 활용하여 디지털로 구현한 게임입니다. 플레이어는 1부터 9까지의 숫자 카드를 사용하여 상대방과 심리전을 펼치며, 제한된 자원(카드)을 효율적으로 사용하여 9라운드 동안 더 많은 승리를 거두는 것을 목표로 합니다.

단순한 로직 구현을 넘어, NASA Open API를 활용한 동적 배경 생성, 시스템 폰트 자동 탐지, 그리고 오프라인 2인 플레이(Hot-seat)를 위한 UI/UX 최적화를 수행하였습니다.

#### 기술 스택
Language: Python 3.x

Library: Pygame, Requests, Pillow (PIL)

API: NASA APOD (Astronomy Picture of the Day) API

### 2. 게임 규칙 및 특징
#### 핵심 규칙
**1. 카드 구성:** 각 플레이어는 1부터 9까지의 숫자 카드를 한 장씩 가집니다.

**2. 진행 방식:** 총 9라운드로 진행되며, 매 라운드마다 한 장의 카드를 비공개로 제출합니다.

**3. 승패 판정:**

- 더 높은 숫자를 낸 플레이어가 승리합니다.

- [특수 규칙] 가장 낮은 '1'은 가장 높은 '9'를 이깁니다.

- 같은 숫자를 낼 경우 무승부 처리됩니다.

**4. 힌트 시스템:** 카드의 뒷면 색상은 숫자의 홀/짝 여부에 따라 다르게 표시됩니다(흑/백). 이를 통해 상대의 수를 예측해야 합니다.

### 3. 피드백 반영 및 코드 개선 사항 (Refactoring Report)
초기 프로토타입에 대한 피드백(버그 제보 및 개선 요청)을 수렴하여, 다음과 같이 코드를 수정하고 기능을 개선하였습니다.

**1. UI/UX 버그 수정**
피드백: "처음 규칙 설명 화면이 화면 밖으로 잘려서 보입니다."

문제 원인: 텍스트 렌더링 좌표가 고정값으로 설정되어 있어, 설명이 길어질 경우 하단 내용이 윈도우 밖으로 벗어나는 현상이 발생했습니다.

해결: draw_rules_screen 함수의 텍스트 배치 Y좌표 간격을 조정하고, 시작 위치를 상향 조정하여 모든 규칙이 한 화면에 온전히 들어오도록 레이아웃을 재설계했습니다.

**2. 폰트 설치 방식의 안전성 확보**
피드백: "폰트 다운로드 URL이 유효하지 않아 오류가 발생하며, 사용자 동의 없이 폰트를 강제 설치하는 방식은 보안상 위험합니다."

문제 원인: 웹에서 폰트 파일을 다운로드하여 임시 디렉토리에 저장하는 방식은 링크 만료 시 치명적인 오류를 유발하며, 악성코드 다운로드 등의 보안 취약점이 될 수 있습니다.

해결:

외부 다운로드 로직 전면 제거: requests를 통한 폰트 다운로드 코드를 삭제했습니다.

시스템 폰트 자동 탐지 알고리즘 구현: get_system_korean_font_name() 함수를 신규 작성하였습니다. 이 함수는 pygame.font.get_fonts()를 통해 OS(Windows, Mac, Linux)에 이미 설치된 한글 폰트(맑은 고딕, 나눔고딕, AppleGothic 등)를 검색하고, 사용 가능한 폰트를 자동으로 연결합니다.

**3. Hot-seat 멀티플레이 프라이버시 보호**
피드백: "한 PC에서 번갈아 진행(Hot-seat)할 때, 턴을 넘기는 과정에서 상대방의 패가 보일 수 있습니다."

문제 원인: 턴이 종료되자마자 즉시 상대방의 턴으로 넘어가며 패가 화면에 노출되어, 공정한 게임 진행이 불가능했습니다.

해결: '중간 대기 화면(Curtain Screen)' 상태(WAITING_FOR_NEXT)를 추가했습니다.

Player 1이 턴을 마치면 화면이 어둡게 가려지며 "STOP! 화면을 가립니다"라는 경고 문구가 뜹니다.

"나는 Player 2입니다" 버튼을 클릭해야만 다음 사람의 패가 공개되도록 하여, 의도치 않은 패 노출을 물리적으로 차단했습니다.

**4. 게임 밸런스 및 규칙 명시화**
피드백: "카드 뒷면 모양(흑/백)으로 숫자를 유추할 수 있는 것이 버그인가요?"

해결: 이는 버그가 아닌 **의도된 게임 매커니즘(홀수=백색, 짝수=흑색)**입니다. 유저의 혼란을 방지하기 위해 규칙 설명 화면에 "4. 카드 뒷면 색상 규칙" 항목을 명시적으로 추가하여, 이것이 전략적 요소임을 분명히 하였습니다.

### 4. 설치 및 실행 방법
#### 필수 라이브러리 설치
본 게임 실행을 위해 다음 라이브러리가 필요합니다.

Bash
pip install pygame requests pillow

#### 환경 변수 설정 (API Key 보안)
NASA API Key를 코드에 직접 노출하지 않기 위해 환경 변수를 사용합니다.

**Windows (CMD/PowerShell)**

DOS
set NASA_API_KEY=DEMO_KEY
python main.py

**Mac / Linux**

Bash
export NASA_API_KEY=DEMO_KEY
python3 main.py
(개인 API Key가 없다면 DEMO_KEY를 사용해도 작동하지만, 요청 횟수에 제한이 있을 수 있습니다.)

### 5. 결론
본 프로젝트는 단순한 기능 구현을 넘어, '사용자 경험(UX)'과 '소프트웨어 안전성' 측면에서의 피드백을 적극적으로 반영하였습니다. 특히 시스템 리소스를 안전하게 활용하는 방법(폰트 처리)과 오프라인 멀티플레이의 구조적 한계를 극복하는 로직(대기 화면)을 구현함으로써 완성도를 높였습니다.