## 구룡투 (Guryongtu) - 전략 보드게임

"숫자 뒤에 숨겨진 심리전, 흑과 백의 승부"

본 프로젝트는 TV 프로그램 *'더 지니어스'*의 데스매치 게임인 **'흑과 백'**을 모티브로 제작된 1:1 전략 보드게임입니다. 단순한 숫자 대결을 넘어, NASA Open API를 활용한 동적인 우주 배경과 심리전 요소를 결합하여 시각적 즐거움과 전략적 깊이를 더했습니다.

### 프로젝트 개요 (Project Overview)

#### 1. 게임 소개

두 명의 플레이어가 1부터 9까지의 숫자 타일을 하나씩 제시하여 승부를 겨루는 게임입니다. 총 9라운드로 진행되며, 더 많은 라운드를 승리한 플레이어가 최종 우승자가 됩니다. 상대방이 낸 카드의 숫자는 보이지 않지만, 타일 뒷면의 **색상(흑/백)**을 통해 숫자의 홀짝 여부를 추리하는 것이 핵심 전략입니다.

#### 2. 주요 특징 (Key Features)

Dynamic Background: NASA APOD(Astronomy Picture of the Day) API를 연동하여, 매일 새로운 우주의 모습을 게임 배경으로 제공합니다.

Privacy Protection (Hot-seat): 하나의 PC에서 두 플레이어가 번갈아 진행할 때, 자신의 패를 상대에게 들키지 않도록 턴 전환 시 **'대기 화면(Curtain)'**을 제공합니다.

Strategic Gameplay: 단순한 운이 아닌, 상대의 남은 패와 홀짝 정보를 카운팅하는 전략적 사고가 요구됩니다.

Persistent Score: 프로그램을 종료하기 전까지 두 플레이어의 전적(Total Wins)이 유지되어 연승 대결이 가능합니다.

### 게임 규칙 (Game Rules)

#### 기본 룰

각 플레이어는 1부터 9까지의 숫자 타일 9개를 가지고 시작합니다.

매 라운드마다 각자 하나의 타일을 선택하여 비공개로 제출합니다.

두 플레이어가 모두 제출하면 타일을 공개하고, 더 높은 숫자를 낸 사람이 승점 1점을 획득합니다.

사용한 타일은 버려지며, 다시 사용할 수 없습니다. (총 9라운드 진행)

#### 특수 룰 (상성)

1 vs 9의 대결: 기본적으로 높은 숫자가 이기지만, 숫자 '1'은 숫자 '9'를 이깁니다.

이는 가장 강력한 패인 9를 견제할 수 있는 유일한 수단이 1임을 의미합니다.

#### 심리전 요소 (흑과 백)

상대가 타일을 낼 때 숫자는 보이지 않지만, 타일 뒷면의 색상은 공개됩니다.

⬜ 흰색 (White): 홀수 (1, 3, 5, 7, 9)

⬛ 흑색 (Black): 짝수 (2, 4, 6, 8)

플레이어는 이를 통해 상대가 낸 수가 홀수인지 짝수인지 예측하여 대응해야 합니다.

### 기술적 구현 및 개선 내역 (Refactoring Log)

본 프로젝트는 초기 개발 이후 교수님 피드백, 동료 평가 및 코드 리뷰를 통해 발견된 문제점을 수정하고 기능을 고도화했습니다.

#### 1. 교수님 피드백 반영 및 기능 개선 (Update Log)

교수님의 피드백을 바탕으로 게임의 버그를 수정하고 플레이 경험을 개선했습니다.

**1. 버그 수정 (Bug Fix)**
* **규칙 화면 짤림 해결:** 텍스트 위치와 줄 간격을 조정하여 모든 규칙 설명이 화면 내에 정상적으로 표시되도록 수정했습니다.
* **폰트 설치 오류 해결:** 외부 폰트를 강제로 다운로드하는 불안정한 코드를 제거하고, OS별(Windows/Mac/Linux) 시스템 기본 한글 폰트를 자동으로 찾아 적용하도록 개선했습니다.

**2. 기능 개선 (Improvement)**
* **Hot-seat 모드 프라이버시 보호:** 한 PC에서 두 명이 번갈아 플레이할 때, 상대방의 패를 보지 못하도록 턴 전환 시 **'대기 화면(커튼 기능)'**을 추가했습니다.
* **게임 룰 직관성 강화:** 카드 뒷면의 색상(흑/백)이 버그가 아니라 홀/짝을 추리하는 핵심 전략 요소임을 명확히 하고, 시각적으로 구현했습니다.
* **강제 설치 방지:** 사용자 동의 없는 파일 다운로드를 막아 프로그램의 안정성과 보안을 높였습니다.

#### 2. 동료 피드백 반영 및 기능 추가

동료들의 피드백을 적극 수용하여 다음과 같이 게임성을 개선했습니다.

**[UX 개선]** 선공 플레이어 알림 추가

문제점: "게임이 시작될 때 누가 선공인지 인지하기 어렵다"는 피드백 접수.

해결: 게임 시작 시 팝업 텍스트를 통해 선공 플레이어를 명확히 고지하는 TRANSITION 단계를 추가하여 혼란을 방지했습니다.

**[기능 추가]** 전적 기록 시스템 (Total Score)

문제점: "한 판이 끝나면 승부 기록이 사라져 아쉽다"는 의견.

해결: 게임이 종료되어도 재시작 시 점수가 초기화되지 않고, Player 1 vs Player 2의 누적 승리 횟수가 유지되도록 로직을 수정했습니다.

**[안정성 강화]** NASA API 예외 처리 (Video Type)

문제점: "NASA '오늘의 사진'이 동영상(Video)일 경우 프로그램이 멈출 수 있다"는 잠재적 버그 제보.

해결: API 응답 데이터의 media_type을 검사하여, 이미지가 아닌 경우 안내 메시지를 출력하고 안전하게 기본 배경(Dark Mode)으로 실행되도록 예외 처리를 구현했습니다.

#### 3. 보안 및 환경 설정 개선

API Key 보안 강화: 소스코드에 하드코딩되어 있던 민감한 정보(API Key)를 제거하고, os.environ을 사용하여 운영체제 환경변수로부터 키를 주입받도록 구조를 변경했습니다.

외부 폰트 의존성 제거: 불안정한 폰트 다운로드 방식을 제거하고, OS별(Windows/Mac/Linux) 시스템 폰트를 자동으로 감지하여 적용하도록 개선했습니다.

### 실행 방법 (How to Run)

#### 1. 필수 라이브러리 설치

본 게임은 Python 환경에서 실행되며, 다음 라이브러리가 필요합니다.

pip install pygame requests pillow


#### 2. 환경변수 설정 (필수)

NASA API를 사용하기 위해 환경변수 설정이 필요합니다.

변수명: NASA_API_KEY

값: 본인의 NASA API Key (https://api.nasa.gov/ 에서 무료 발급 가능)

참고: 환경변수를 설정하지 않아도 게임은 실행되지만, 우주 배경 대신 기본 배경이 적용됩니다.

#### 3. 게임 실행

python game.py


### 프로젝트 구조

game.py: 게임의 주요 로직 및 UI 렌더링, 이벤트 처리가 포함된 메인 소스 코드

README.md: 프로젝트 설명서 및 리포트

pyproject.toml / uv.lock: 프로젝트 의존성 관리 파일

### 실행 방법 및 환경 설정 (Update)

이 프로젝트는 NASA Open API를 사용합니다. 보안을 위해 API Key는 코드에 포함되지 않았습니다.
게임을 정상적으로 실행하려면 아래와 같이 환경변수를 설정해야 합니다.

### 필수 환경변수
* **변수명:** `NASA_API_KEY`
* **값:** 본인의 NASA API Key (https://api.nasa.gov/ 에서 발급 가능)

### 과제 업데이트 내역 (Refactor)
1. **보안 강화:** 소스코드에 하드코딩된 API Key를 제거하고 `os.environ`을 사용하도록 수정했습니다.

2. **환경변수 적용:** 실행 시 외부에서 Key를 주입받도록 변경하여 보안성을 높였습니다.
